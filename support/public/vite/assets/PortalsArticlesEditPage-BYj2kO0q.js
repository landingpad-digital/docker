import{c as l,r as g,P as B,a as k,o as L}from"./_plugin-vue_export-helper-oDyrv2Bi.js";import{u as w,a as x}from"./Validators-CR1_IsvH.js";import{u as C}from"./globalConfig-DKMDNuTt.js";import{a as b,u as D}from"./index-e_Ve9UOc.js";import{ah as G}from"./DashboardIcon-n44bsHEn.js";import{f as M}from"./dashboard-DnDah_4L.js";import{b as V,c as v}from"./index-DSpTxLw5.js";import{A as N}from"./ArticleEditor-xX7lIAiU.js";import"./index-DN3rM4CW.js";import"./_commonjsHelpers-BosuxZz1.js";import"./exports-B11obB9j.js";import"./js.cookie-Cz0CWeBA.js";import"./utils.esm-5YkSGuZj.js";import"./Icon-D2yf-2CL.js";import"./index-BtuGy7By.js";import"./typing-CQz17R6T.js";import"./useMessageFormatter-BWcWDZNI.js";import"./useKeyboardNavigableList-15KVdaF0.js";import"./helper-q29O9VCT.js";import"./Thumbnail-Db-_4b-x.js";import"./module-BhDw1mWm.js";import"./BarChart-YGh2BbSb.js";import"./constants-lVAyZKq6.js";import"./IframeLoader-B146Rajx.js";import"./vue-dompurify-html-DajrD5x3.js";import"./HelpCenterLayout-CnT9GiDU.js";const mt={__name:"PortalsArticlesEditPage",setup(O){const r=w(),m=x(),_=V(),{t:A}=C(),{articleSlug:n,portalSlug:o}=r.params,f=v("articles/articleById"),i=l(()=>f.value(n)),y=v("portals/portalBySlug"),E=l(()=>y.value(o)),u=g(!1),p=g(!1),S=l(()=>{var c;const{slug:t,locale:a}=i.value.category,{slug:e}=i.value,s=(c=E.value)==null?void 0:c.custom_domain;return M(o,t,a,e,s)}),d=async({...t},a=!1)=>{const e=a?"articles/updateAsync":"articles/update";u.value=!0;try{await _.dispatch(e,{portalSlug:o,articleId:n,...t}),p.value=!0}catch(s){const c=(s==null?void 0:s.message)||A("HELP_CENTER.EDIT_ARTICLE_PAGE.API.ERROR");D(c)}finally{setTimeout(()=>{u.value=!1,p.value=!0},1500)}},R=async({...t})=>{d({...t},!0)},h=l(()=>r.name==="portals_categories_articles_index"||r.name==="portals_categories_articles_edit"||r.name==="portals_categories_index"),P=()=>{const{tab:t,categorySlug:a,locale:e}=r.params;h.value?m.push({name:"portals_categories_articles_index",params:{categorySlug:a,locale:e}}):m.push({name:"portals_articles_index",params:{tab:t,categorySlug:a,locale:e}})},T=()=>{_.dispatch("articles/show",{id:n,portalSlug:o})},I=()=>{var t;window.open(S.value,"_blank"),b(G.PREVIEW_ARTICLE,{status:(t=i.value)==null?void 0:t.status})};return B(T),(t,a)=>(L(),k(N,{article:i.value,"is-updating":u.value,"is-saved":p.value,onSaveArticle:d,onSaveArticleAsync:R,onPreviewArticle:I,onGoBack:P},null,8,["article","is-updating","is-saved"]))}};export{mt as default};
//# sourceMappingURL=PortalsArticlesEditPage-BYj2kO0q.js.map
