import{r as o,c as h,a as y,o as C}from"./_plugin-vue_export-helper-oDyrv2Bi.js";import{u as T,a as P}from"./Validators-CR1_IsvH.js";import{u as k}from"./globalConfig-DKMDNuTt.js";import{a as B,u as L}from"./index-e_Ve9UOc.js";import{b as N,c as m}from"./index-DSpTxLw5.js";import{ah as w}from"./DashboardIcon-n44bsHEn.js";import{A as x}from"./ArticleEditor-xX7lIAiU.js";import"./index-DN3rM4CW.js";import"./_commonjsHelpers-BosuxZz1.js";import"./exports-B11obB9j.js";import"./js.cookie-Cz0CWeBA.js";import"./utils.esm-5YkSGuZj.js";import"./Icon-D2yf-2CL.js";import"./dashboard-DnDah_4L.js";import"./index-BtuGy7By.js";import"./typing-CQz17R6T.js";import"./useMessageFormatter-BWcWDZNI.js";import"./useKeyboardNavigableList-15KVdaF0.js";import"./helper-q29O9VCT.js";import"./Thumbnail-Db-_4b-x.js";import"./module-BhDw1mWm.js";import"./BarChart-YGh2BbSb.js";import"./constants-lVAyZKq6.js";import"./IframeLoader-B146Rajx.js";import"./vue-dompurify-html-DajrD5x3.js";import"./HelpCenterLayout-CnT9GiDU.js";const lt={__name:"PortalsArticlesNewPage",setup(G){const s=T(),i=P(),d=N(),{t:v}=k(),{portalSlug:u}=s.params,n=o(null),p=o(null),g=m("getCurrentUserID"),f=m("categories/allCategories"),_=h(()=>{var t;return((t=f.value[0])==null?void 0:t.id)||null}),a=o({}),c=o(!1),A=o(!1),I=t=>{n.value=t},E=t=>{p.value=t},R=async({title:t,content:r})=>{if(t&&(a.value.title=t),r&&(a.value.content=r),!(!a.value.title||!a.value.content)){c.value=!0;try{const{locale:e}=s.params,l=await d.dispatch("articles/create",{portalSlug:u,content:a.value.content,title:a.value.title,locale:e,authorId:n.value||g.value,categoryId:p.value||_.value});B(w.CREATE_ARTICLE,{locale:e}),i.replace({name:"portals_articles_edit",params:{articleSlug:l,portalSlug:u,locale:e}})}catch(e){const l=(e==null?void 0:e.message)||v("HELP_CENTER.EDIT_ARTICLE_PAGE.API.ERROR");L(l)}finally{c.value=!1}}},S=()=>{const{tab:t,categorySlug:r,locale:e}=s.params;i.push({name:"portals_articles_index",params:{tab:t,categorySlug:r,locale:e}})};return(t,r)=>(C(),y(x,{article:a.value,"is-updating":c.value,"is-saved":A.value,onSaveArticle:R,onGoBack:S,onSetAuthor:I,onSetCategory:E},null,8,["article","is-updating","is-saved"]))}};export{lt as default};
//# sourceMappingURL=PortalsArticlesNewPage-8XLC7Ngm.js.map
