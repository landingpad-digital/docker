import{_ as Z,r as v,n as F,o as A,e as p,l as G,a as x,g as $,p as l,z as Q,t as f,H as o,a4 as k,c as I,w as j}from"./_plugin-vue_export-helper-oDyrv2Bi.js";import{u as U}from"./globalConfig-DKMDNuTt.js";import{o as Y,h as ee,u as K,a as te}from"./Validators-CR1_IsvH.js";import{y as ae,O as oe,p as le,v as M,z as se,x as ne,t as B,u as ie}from"./dashboard-DnDah_4L.js";import{u as h}from"./index-e_Ve9UOc.js";import{b as X,u as re,c as H}from"./index-DSpTxLw5.js";import{_ as ue}from"./HelpCenterLayout-CnT9GiDU.js";import{u as ce,az as V}from"./DashboardIcon-n44bsHEn.js";import{_ as y,t as de,B as _e}from"./typing-CQz17R6T.js";import{c as W,r as z,u as Ee,m as me}from"./exports-B11obB9j.js";import"./index-DN3rM4CW.js";import"./index-BtuGy7By.js";import"./_commonjsHelpers-BosuxZz1.js";import"./useKeyboardNavigableList-15KVdaF0.js";import"./helper-q29O9VCT.js";import"./utils.esm-5YkSGuZj.js";import"./Thumbnail-Db-_4b-x.js";import"./module-BhDw1mWm.js";import"./Icon-D2yf-2CL.js";import"./useMessageFormatter-BWcWDZNI.js";import"./BarChart-YGh2BbSb.js";import"./constants-lVAyZKq6.js";import"./IframeLoader-B146Rajx.js";import"./vue-dompurify-html-DajrD5x3.js";import"./js.cookie-Cz0CWeBA.js";const Te={class:"flex items-center flex-grow gap-2"},pe={class:"min-w-0 truncate"},ge={__name:"ColorPicker",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(g,{emit:R}){const i=R,d=v(!1),a=()=>{d.value=!d.value},r=()=>{d.value&&a()},T=E=>{i("update:modelValue",E.hex)},e=v(null);return(E,O)=>(A(),F("div",{ref_key:"pickerRef",ref:e,class:"relative w-fit"},[p(o(oe),{onTrigger:r},{default:G(()=>[p(y,{color:"slate",icon:"i-lucide-pipette","trailing-icon":"",class:"!px-3 !py-3 [&>svg]:w-4 [&>svg]:h-4",onClick:a},{default:G(()=>[l("div",Te,[l("span",{class:"rounded-md size-4",style:Q({backgroundColor:g.modelValue})},null,4),l("span",pe,f(g.modelValue),1)])]),_:1}),d.value?(A(),x(o(ae.Chrome),{key:0,"disable-alpha":"","model-value":g.modelValue,class:"colorpicker--chrome","onUpdate:modelValue":T},null,8,["model-value"])):$("",!0)]),_:1})],512))}},Re=Z(ge,[["__scopeId","data-v-92666597"]]),fe={class:"flex flex-col w-full gap-4"},Oe={class:"flex flex-col w-full gap-2"},Le={class:"mb-0.5 text-sm font-medium text-gray-900 dark:text-gray-50"},Pe={class:"flex flex-col w-full gap-4"},Ae={class:"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]"},Ne={class:"text-sm font-medium whitespace-nowrap py-2.5 text-slate-900 dark:text-slate-50"},Ie={class:"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]"},Ce={class:"text-sm font-medium whitespace-nowrap py-2.5 text-slate-900 dark:text-slate-50"},Se={class:"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]"},he={class:"text-sm font-medium whitespace-nowrap text-slate-900 py-2.5 dark:text-slate-50"},ve={class:"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]"},xe={class:"text-sm font-medium whitespace-nowrap text-slate-900 py-2.5 dark:text-slate-50"},De={class:"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]"},Ge={class:"text-sm font-medium whitespace-nowrap py-2.5 text-slate-900 dark:text-slate-50"},Ue={class:"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]"},be={class:"text-sm font-medium whitespace-nowrap py-2.5 text-slate-900 dark:text-slate-50"},Me={class:"flex items-start justify-between w-full gap-2"},Fe={class:"text-sm font-medium whitespace-nowrap py-2.5 text-slate-900 dark:text-slate-50"},ye={class:"w-[432px] justify-start"},He={class:"flex justify-end w-full gap-2"},q=4,we={__name:"PortalBaseSettings",props:{activePortal:{type:Object,required:!0},isFetching:{type:Boolean,default:!1}},emits:["updatePortal"],setup(g,{emit:R}){const i=g,d=R,{t:a}=U(),r=X(),T=re(),e=k({name:"",headerText:"",pageTitle:"",slug:"",widgetColor:"",homePageLink:"",liveChatWidgetInboxId:"",logoUrl:"",avatarBlobId:""}),E=k({...e}),O=I(()=>r.getters["inboxes/getInboxes"].filter(t=>t.channel_type==="Channel::WebWidget").map(t=>({value:t.id,label:t.name}))),L={name:{required:z,minLength:me(2)},slug:{required:W.withMessage(()=>a("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.ERROR"),z),isValidSlug:W.withMessage(()=>a("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.FORMAT_ERROR"),Y)},homePageLink:{shouldBeUrl:ee}},n=Ee(L,e),N=I(()=>n.value.name.$error?a("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.ERROR"):""),C=I(()=>{var s;return((s=n.value.slug.$errors[0])==null?void 0:s.$message)||""}),D=I(()=>n.value.homePageLink.$error?a("HELP_CENTER.PORTAL_SETTINGS.FORM.HOME_PAGE_LINK.ERROR"):""),b=I(()=>{var t,c;const s=(t=i.activePortal)==null?void 0:t.slug;return s?(c=T["portals/uiFlagsIn"].value(s))==null?void 0:c.isUpdating:!1});j(()=>i.activePortal,s=>{var t;if(s&&!i.isFetching){if(Object.assign(e,{name:s.name,headerText:s.header_text,pageTitle:s.page_title,widgetColor:s.color,homePageLink:s.homepage_link,slug:s.slug,liveChatWidgetInboxId:(t=s.inbox)==null?void 0:t.id}),s.logo){const{logo:{file_url:c,blob_id:J}}=s;e.logoUrl=c,e.avatarBlobId=J}else e.logoUrl="",e.avatarBlobId="";Object.assign(E,e)}},{immediate:!0,deep:!0});const P=I(()=>JSON.stringify(e)!==JSON.stringify(E)),S=()=>{var t;const s={id:(t=i.activePortal)==null?void 0:t.id,slug:e.slug,name:e.name,color:e.widgetColor,page_title:e.pageTitle,header_text:e.headerText,homepage_link:e.homePageLink,blob_id:e.avatarBlobId,inbox_id:e.liveChatWidgetInboxId};d("updatePortal",s)};async function w({file:s}){try{const{fileUrl:t,blobId:c}=await ce(s);t&&(e.logoUrl=t,e.avatarBlobId=c),h(a("HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_UPLOAD_SUCCESS"))}catch{h(a("HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_UPLOAD_ERROR"))}}async function u(){var s;try{const t=(s=i.activePortal)==null?void 0:s.slug;await r.dispatch("portals/deleteLogo",{portalSlug:t}),h(a("HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_DELETE_SUCCESS"))}catch(t){h((t==null?void 0:t.message)||a("HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_DELETE_ERROR"))}}const _=s=>{de(s,q)?w(s):h(a("HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_UPLOAD_SIZE_ERROR",{size:q}))},m=()=>{e.logoUrl="",e.avatarBlobId="",u()};return(s,t)=>(A(),F("div",fe,[l("div",Oe,[l("label",Le,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.LABEL")),1),p(le,{src:e.logoUrl,name:e.name,size:72,"allow-upload":"","icon-name":"i-lucide-building-2",onUpload:_,onDelete:m},null,8,["src","name"])]),l("div",Pe,[l("div",Ae,[l("label",Ne,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.NAME.LABEL")),1),p(M,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=c=>e.name=c),placeholder:o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.NAME.PLACEHOLDER"),"message-type":N.value?"error":"info",message:N.value,"custom-input-class":"!bg-transparent dark:!bg-transparent",onInput:t[1]||(t[1]=c=>o(n).name.$touch()),onBlur:t[2]||(t[2]=c=>o(n).name.$touch())},null,8,["modelValue","placeholder","message-type","message"])]),l("div",Ie,[l("label",Ce,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.HEADER_TEXT.LABEL")),1),p(M,{modelValue:e.headerText,"onUpdate:modelValue":t[3]||(t[3]=c=>e.headerText=c),placeholder:o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.HEADER_TEXT.PLACEHOLDER"),"custom-input-class":"!bg-transparent dark:!bg-transparent"},null,8,["modelValue","placeholder"])]),l("div",Se,[l("label",he,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.PAGE_TITLE.LABEL")),1),p(M,{modelValue:e.pageTitle,"onUpdate:modelValue":t[4]||(t[4]=c=>e.pageTitle=c),placeholder:o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.PAGE_TITLE.PLACEHOLDER"),"custom-input-class":"!bg-transparent dark:!bg-transparent"},null,8,["modelValue","placeholder"])]),l("div",ve,[l("label",xe,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.HOME_PAGE_LINK.LABEL")),1),p(M,{modelValue:e.homePageLink,"onUpdate:modelValue":t[5]||(t[5]=c=>e.homePageLink=c),placeholder:o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.HOME_PAGE_LINK.PLACEHOLDER"),"message-type":D.value?"error":"info",message:D.value,"custom-input-class":"!bg-transparent dark:!bg-transparent",onInput:t[6]||(t[6]=c=>o(n).homePageLink.$touch()),onBlur:t[7]||(t[7]=c=>o(n).homePageLink.$touch())},null,8,["modelValue","placeholder","message-type","message"])]),l("div",De,[l("label",Ge,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.SLUG.LABEL")),1),p(M,{modelValue:e.slug,"onUpdate:modelValue":t[8]||(t[8]=c=>e.slug=c),placeholder:o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.SLUG.PLACEHOLDER"),"message-type":C.value?"error":"info",message:C.value||o(se)(e.slug),"custom-input-class":"!bg-transparent dark:!bg-transparent",onInput:t[9]||(t[9]=c=>o(n).slug.$touch()),onBlur:t[10]||(t[10]=c=>o(n).slug.$touch())},null,8,["modelValue","placeholder","message-type","message"])]),l("div",Ue,[l("label",be,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.LIVE_CHAT_WIDGET.LABEL")),1),p(ne,{modelValue:e.liveChatWidgetInboxId,"onUpdate:modelValue":t[11]||(t[11]=c=>e.liveChatWidgetInboxId=c),options:O.value,placeholder:o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.LIVE_CHAT_WIDGET.PLACEHOLDER"),message:o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.LIVE_CHAT_WIDGET.HELP_TEXT"),class:"[&>div>button:not(.focused)]:!outline-n-weak"},null,8,["modelValue","options","placeholder","message"])]),l("div",Me,[l("label",Fe,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.BRAND_COLOR.LABEL")),1),l("div",ye,[p(Re,{modelValue:e.widgetColor,"onUpdate:modelValue":t[12]||(t[12]=c=>e.widgetColor=c)},null,8,["modelValue"])])]),l("div",He,[p(y,{label:o(a)("HELP_CENTER.PORTAL_SETTINGS.FORM.SAVE_CHANGES"),disabled:!P.value||b.value||o(n).$invalid,"is-loading":b.value,onClick:S},null,8,["label","disabled","is-loading"])])])]))}},ke={__name:"AddCustomDomainDialog",props:{mode:{type:String,default:"add"},customDomain:{type:String,default:""}},emits:["addCustomDomain"],setup(g,{expose:R,emit:i}){const d=g,a=i,{t:r}=U(),T=v(null),e=k({customDomain:d.customDomain});j(()=>d.customDomain,O=>{e.customDomain=O});const E=()=>{a("addCustomDomain",e.customDomain)};return R({dialogRef:T}),(O,L)=>(A(),x(B,{ref_key:"dialogRef",ref:T,title:o(r)(`HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.${d.mode.toUpperCase()}_HEADER`),"confirm-button-label":o(r)(`HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.${d.mode.toUpperCase()}_CONFIRM_BUTTON_LABEL`),onConfirm:E},{default:G(()=>[p(M,{modelValue:e.customDomain,"onUpdate:modelValue":L[0]||(L[0]=n=>e.customDomain=n),label:o(r)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.LABEL"),placeholder:o(r)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])]),_:1},8,["title","confirm-button-label"]))}},$e={class:"mb-0 text-sm text-n-slate-12"},Be={class:"flex flex-col gap-6"},Ve={class:"h-10 px-3 py-2.5 text-sm select-none bg-transparent border rounded-lg text-n-slate-11 border-n-strong"},We={class:"text-sm text-n-slate-12"},ze={__name:"DNSConfigurationDialog",props:{customDomain:{type:String,default:""}},emits:["confirm"],setup(g,{expose:R,emit:i}){const d=g,a=i,{t:r}=U(),T=I(()=>{const{hostURL:L,helpCenterURL:n}=(window==null?void 0:window.chatwootConfig)||{};return V(n)||V(L)||""}),e=I(()=>`${d.customDomain} CNAME ${T.value}`),E=v(null),O=()=>{a("confirm")};return R({dialogRef:E}),(L,n)=>(A(),x(B,{ref_key:"dialogRef",ref:E,title:o(r)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.HEADER"),"confirm-button-label":o(r)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.CONFIRM_BUTTON_LABEL"),"show-cancel-button":!1,onConfirm:O},{description:G(()=>[l("p",$e,f(o(r)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.DESCRIPTION")),1)]),default:G(()=>[l("div",Be,[l("span",Ve,f(e.value),1),l("p",We,f(o(r)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.HELP_TEXT")),1)])]),_:1},8,["title","confirm-button-label"]))}},qe={class:"flex flex-col w-full gap-6"},je={class:"flex flex-col gap-2"},Ke={class:"text-base font-medium text-n-slate-12"},Xe={class:"text-sm text-n-slate-11"},Je={class:"flex flex-col w-full gap-4"},Ze={class:"flex justify-between w-full gap-2"},Qe={key:0,class:"flex items-center w-full h-8 gap-4"},Ye={class:"text-sm font-medium text-n-slate-12"},et={class:"text-sm text-n-slate-12"},tt={class:"flex items-center justify-end w-full"},at={__name:"PortalConfigurationSettings",props:{activePortal:{type:Object,required:!0}},emits:["updatePortalConfiguration"],setup(g,{emit:R}){const i=g,d=R,{t:a}=U(),r=v(null),T=v(null),e=v(""),E=I(()=>{var n;return((n=i.activePortal)==null?void 0:n.custom_domain)||""}),O=n=>{var C;const N={id:(C=i.activePortal)==null?void 0:C.id,custom_domain:n};d("updatePortalConfiguration",N),r.value.dialogRef.close(),n&&(e.value=n,T.value.dialogRef.open())},L=()=>{e.value="",T.value.dialogRef.close()};return(n,N)=>(A(),F("div",qe,[l("div",je,[l("h6",Ke,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.HEADER")),1),l("span",Xe,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DESCRIPTION")),1)]),l("div",Je,[l("div",Ze,[E.value?(A(),F("div",Qe,[l("label",Ye,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.LABEL")),1),l("span",et,f(E.value),1)])):$("",!0),l("div",tt,[E.value?(A(),x(y,{key:0,color:"slate",label:o(a)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.EDIT_BUTTON"),onClick:N[0]||(N[0]=C=>r.value.dialogRef.open())},null,8,["label"])):(A(),x(y,{key:1,label:o(a)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.ADD_BUTTON"),color:"slate",onClick:N[1]||(N[1]=C=>r.value.dialogRef.open())},null,8,["label"]))])])]),p(ke,{ref_key:"addCustomDomainDialogRef",ref:r,mode:E.value?"edit":"add","custom-domain":E.value,onAddCustomDomain:O},null,8,["mode","custom-domain"]),p(ze,{ref_key:"dnsConfigurationDialogRef",ref:T,"custom-domain":e.value||E.value,onConfirm:L},null,8,["custom-domain"])]))}},ot={__name:"ConfirmDeletePortalDialog",props:{activePortalName:{type:String,required:!0}},emits:["deletePortal"],setup(g,{expose:R,emit:i}){const d=i,{t:a}=U(),r=v(null),T=()=>{d("deletePortal")};return R({dialogRef:r}),(e,E)=>(A(),x(B,{ref_key:"dialogRef",ref:r,type:"alert",title:o(a)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.DIALOG.HEADER",{portalName:g.activePortalName}),description:o(a)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.DIALOG.DESCRIPTION"),"confirm-button-label":o(a)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.DIALOG.CONFIRM_BUTTON_LABEL"),onConfirm:T},null,8,["title","description","confirm-button-label"]))}},lt={key:0,class:"flex items-center justify-center py-10 pt-2 pb-8 text-n-slate-11"},st={key:1,class:"flex flex-col w-full gap-4 max-w-[40rem] pb-8"},nt={class:"flex items-end justify-between w-full gap-4"},it={class:"flex flex-col gap-2"},rt={class:"text-base font-medium text-n-slate-12"},ut={class:"text-sm text-n-slate-11"},ct={__name:"PortalSettings",props:{portals:{type:Array,required:!0},isFetching:{type:Boolean,required:!0}},emits:["updatePortal","updatePortalConfiguration","deletePortal"],setup(g,{emit:R}){const i=g,d=R,{t:a}=U(),r=K(),T=v(null),e=I(()=>r.params.portalSlug),E=H("portals/isSwitchingPortal"),O=I(()=>{var P;return(P=i.portals)==null?void 0:P.find(S=>S.slug===e.value)}),L=I(()=>{var P;return((P=O.value)==null?void 0:P.name)||""}),n=I(()=>i.isFetching||E.value),N=P=>{d("updatePortal",P)},C=P=>{d("updatePortalConfiguration",P)},D=()=>{T.value.dialogRef.open()},b=()=>{d("deletePortal",O.value),T.value.dialogRef.close()};return(P,S)=>(A(),x(ue,{"show-pagination-footer":!1},{content:G(()=>[n.value?(A(),F("div",lt,[p(_e)])):O.value?(A(),F("div",st,[p(we,{"active-portal":O.value,"is-fetching":g.isFetching,onUpdatePortal:N},null,8,["active-portal","is-fetching"]),S[0]||(S[0]=l("div",{class:"w-full h-px bg-slate-50 dark:bg-slate-800/50"},null,-1)),p(at,{"active-portal":O.value,"is-fetching":g.isFetching,onUpdatePortalConfiguration:C},null,8,["active-portal","is-fetching"]),S[1]||(S[1]=l("div",{class:"w-full h-px bg-slate-50 dark:bg-slate-800/50"},null,-1)),l("div",nt,[l("div",it,[l("h6",rt,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.HEADER")),1),l("span",ut,f(o(a)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.DESCRIPTION")),1)]),p(y,{label:o(a)("HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.BUTTON",{portalName:L.value}),color:"ruby",class:"max-w-56 !w-fit",onClick:D},null,8,["label"])])])):$("",!0)]),default:G(()=>[p(ot,{ref_key:"confirmDeletePortalDialogRef",ref:T,"active-portal-name":L.value,onDeletePortal:b},null,8,["active-portal-name"])]),_:1}))}},Ft={__name:"PortalsSettingsIndexPage",setup(g){const{t:R}=U(),i=X(),d=K(),a=te(),{updateUISettings:r}=ie(),T=H("portals/allPortals"),e=H("portals/isFetchingPortals"),E=H("portals/portalBySlug"),O=u=>{var _;return((_=T.value)==null?void 0:_.find(m=>m.slug!==u))??null},L=u=>{var _,m;return(m=(_=E.value(u))==null?void 0:_.meta)==null?void 0:m.default_locale},n=async(u,_)=>{const m={portalSlug:u,locale:_};await Promise.all([i.dispatch("portals/index"),i.dispatch("portals/show",m),i.dispatch("categories/index",m),i.dispatch("agents/get"),i.dispatch("inboxes/get")])},N=async u=>{const _=O(u);if(_){const{slug:m,meta:{default_locale:s}}=_;await n(m,s),a.push({name:"portals_articles_index",params:{portalSlug:m,locale:s}})}else a.push({name:"portals_new"})},C=async(u,_)=>{await n(u,_),r({last_active_portal_slug:u,last_active_locale_code:_}),await a.replace({name:"portals_settings_index",params:{portalSlug:u}})},D=async u=>{const{portalSlug:_}=d.params;try{const m=L(_);await i.dispatch("portals/update",{...u,portalSlug:_||(u==null?void 0:u.slug)}),u!=null&&u.slug&&_!==u.slug&&await C(u.slug,m),h(R("HELP_CENTER.PORTAL_SETTINGS.API.UPDATE_PORTAL.SUCCESS_MESSAGE"))}catch(m){h((m==null?void 0:m.message)||R("HELP_CENTER.PORTAL_SETTINGS.API.UPDATE_PORTAL.ERROR_MESSAGE"))}},b=async u=>{const{slug:_}=u;try{await i.dispatch("portals/delete",{portalSlug:_}),await N(_),h(R("HELP_CENTER.PORTAL.PORTAL_SETTINGS.DELETE_PORTAL.API.DELETE_SUCCESS"))}catch(m){h((m==null?void 0:m.message)||R("HELP_CENTER.PORTAL.PORTAL_SETTINGS.DELETE_PORTAL.API.DELETE_ERROR"))}},P=D,S=D,w=b;return(u,_)=>(A(),x(ct,{portals:o(T),"is-fetching":o(e),onUpdatePortal:o(P),onUpdatePortalConfiguration:o(S),onDeletePortal:o(w)},null,8,["portals","is-fetching","onUpdatePortal","onUpdatePortalConfiguration","onDeletePortal"]))}};export{Ft as default};
//# sourceMappingURL=PortalsSettingsIndexPage-YHQYNQkq.js.map
