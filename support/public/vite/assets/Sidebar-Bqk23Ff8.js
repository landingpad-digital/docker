import{m as M}from"./globalConfig-DKMDNuTt.js";import{f as s,w as B,A as H,a8 as j,aB as K,Q as z,Y,X,a as P,h as D}from"./DashboardIcon-n44bsHEn.js";import{J as _,O as q,c as Z,$ as J,a0 as U,a1 as F,a2 as Q,I as tt,a3 as et,a4 as V,a5 as nt}from"./dashboard-DnDah_4L.js";import{u as ot}from"./useKeyboardNavigableList-15KVdaF0.js";import{u as st,a as at}from"./Validators-CR1_IsvH.js";import{_ as v,s as r,n as d,o as a,e as i,l as u,p as h,I as T,a as A,i as k,q as C,g as w,t as f,b as it,F as E,j as O,T as W,z as rt,v as lt,m as G,u as ct}from"./_plugin-vue_export-helper-oDyrv2Bi.js";import{u as ut,a as dt}from"./index-e_Ve9UOc.js";import{_ as $}from"./typing-CQz17R6T.js";import{T as mt}from"./Thumbnail-Db-_4b-x.js";import"./exports-B11obB9j.js";import"./js.cookie-Cz0CWeBA.js";import"./_commonjsHelpers-BosuxZz1.js";import"./utils.esm-5YkSGuZj.js";import"./Icon-D2yf-2CL.js";import"./index-BtuGy7By.js";import"./index-DSpTxLw5.js";import"./index-DN3rM4CW.js";import"./helper-q29O9VCT.js";import"./module-BhDw1mWm.js";import"./useMessageFormatter-BWcWDZNI.js";import"./BarChart-YGh2BbSb.js";import"./constants-lVAyZKq6.js";import"./IframeLoader-B146Rajx.js";import"./vue-dompurify-html-DajrD5x3.js";const ht=t=>({parentNav:"conversations",routes:["home","inbox_dashboard","inbox_conversation","conversation_through_inbox","notifications_dashboard","label_conversations","conversations_through_label","team_conversations","conversations_through_team","conversation_mentions","conversation_through_mentions","conversation_participating","conversation_through_participating","folder_conversations","conversations_through_folders","conversation_unattended","conversation_through_unattended"],menuItems:[{icon:"chat",label:"ALL_CONVERSATIONS",key:"conversations",toState:s(`accounts/${t}/dashboard`),toolTip:"Conversation from all subscribed inboxes",toStateName:"home"},{icon:"mention",label:"MENTIONED_CONVERSATIONS",key:"conversation_mentions",toState:s(`accounts/${t}/mentions/conversations`),toStateName:"conversation_mentions"},{icon:"mail-unread",label:"UNATTENDED_CONVERSATIONS",key:"conversation_unattended",toState:s(`accounts/${t}/unattended/conversations`),toStateName:"conversation_unattended"}]}),_t=t=>({parentNav:"contacts",routes:["contacts_dashboard_index","contacts_dashboard_segments_index","contacts_dashboard_labels_index","contacts_edit","contacts_edit_segment","contacts_edit_label"],menuItems:[{icon:"contact-card-group",label:"ALL_CONTACTS",hasSubMenu:!1,toState:s(`accounts/${t}/contacts?page=1`),toStateName:"contacts_dashboard_index"}]}),gt=t=>({parentNav:"reports",routes:["account_overview_reports","conversation_reports","csat_reports","bot_reports","agent_reports","label_reports","inbox_reports","inbox_reports_show","team_reports","sla_reports"],menuItems:[{icon:"arrow-trending-lines",label:"REPORTS_OVERVIEW",hasSubMenu:!1,toState:s(`accounts/${t}/reports/overview`),toStateName:"account_overview_reports"},{icon:"chat",label:"REPORTS_CONVERSATION",hasSubMenu:!1,toState:s(`accounts/${t}/reports/conversation`),toStateName:"conversation_reports"},{icon:"emoji",label:"CSAT",hasSubMenu:!1,toState:s(`accounts/${t}/reports/csat`),toStateName:"csat_reports"},{icon:"bot",label:"REPORTS_BOT",hasSubMenu:!1,featureFlag:_.RESPONSE_BOT,toState:s(`accounts/${t}/reports/bot`),toStateName:"bot_reports"},{icon:"people",label:"REPORTS_AGENT",hasSubMenu:!1,toState:s(`accounts/${t}/reports/agent`),toStateName:"agent_reports"},{icon:"tag",label:"REPORTS_LABEL",hasSubMenu:!1,toState:s(`accounts/${t}/reports/label`),toStateName:"label_reports"},{icon:"mail-inbox-all",label:"REPORTS_INBOX",hasSubMenu:!1,toState:s(`accounts/${t}/reports/inboxes`),toStateName:"inbox_reports"},{icon:"people-team",label:"REPORTS_TEAM",hasSubMenu:!1,toState:s(`accounts/${t}/reports/teams`),toStateName:"team_reports"},{icon:"document-list-clock",label:"REPORTS_SLA",hasSubMenu:!1,featureFlag:_.SLA,toState:s(`accounts/${t}/reports/sla`),toStateName:"sla_reports"}]}),pt=t=>({parentNav:"campaigns",routes:["campaigns_sms_index","campaigns_livechat_index"],menuItems:[{icon:"arrow-swap",label:"LIVE_CHAT",key:"ongoingCampaigns",hasSubMenu:!1,toState:s(`accounts/${t}/campaigns/live_chat`),toStateName:"campaigns_livechat_index"},{key:"oneOffCampaigns",icon:"sound-source",label:"SMS",hasSubMenu:!1,toState:s(`accounts/${t}/campaigns/sms`),toStateName:"campaigns_sms_index"}]}),ft=t=>({parentNav:"settings",routes:["agent_bots","agent_list","attributes_list","automation_list","auditlogs_list","billing_settings_index","canned_list","general_settings_index","general_settings","labels_list","macros_edit","macros_new","macros_wrapper","settings_applications_integration","settings_applications_webhook","settings_applications","settings_inbox_finish","settings_inbox_list","settings_inbox_new","settings_inbox_show","settings_inboxes_add_agents","settings_inboxes_page_channel","settings_integrations_dashboard_apps","settings_integrations_integration","settings_integrations_slack","settings_integrations_webhook","settings_integrations","settings_teams_add_agents","settings_teams_edit_finish","settings_teams_edit_members","settings_teams_edit","settings_teams_finish","settings_teams_list","settings_teams_new","sla_list","custom_roles_list"],menuItems:[{icon:"briefcase",label:"ACCOUNT_SETTINGS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/general`),toStateName:"general_settings_index"},{icon:"people",label:"AGENTS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/agents/list`),toStateName:"agent_list",featureFlag:_.AGENT_MANAGEMENT},{icon:"people-team",label:"TEAMS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/teams/list`),toStateName:"settings_teams_list",featureFlag:_.TEAM_MANAGEMENT},{icon:"mail-inbox-all",label:"INBOXES",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/inboxes/list`),toStateName:"settings_inbox_list",featureFlag:_.INBOX_MANAGEMENT},{icon:"tag",label:"LABELS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/labels/list`),toStateName:"labels_list",featureFlag:_.LABELS},{icon:"code",label:"CUSTOM_ATTRIBUTES",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/custom-attributes/list`),toStateName:"attributes_list",featureFlag:_.CUSTOM_ATTRIBUTES},{icon:"automation",label:"AUTOMATION",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/automation/list`),toStateName:"automation_list",featureFlag:_.AUTOMATIONS},{icon:"bot",label:"AGENT_BOTS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/agent-bots`),toStateName:"agent_bots",featureFlag:_.AGENT_BOTS},{icon:"flash-settings",label:"MACROS",hasSubMenu:!1,meta:{permissions:["administrator","agent"]},toState:s(`accounts/${t}/settings/macros`),toStateName:"macros_wrapper",featureFlag:_.MACROS},{icon:"chat-multiple",label:"CANNED_RESPONSES",hasSubMenu:!1,meta:{permissions:["administrator","agent"]},toState:s(`accounts/${t}/settings/canned-response/list`),toStateName:"canned_list",featureFlag:_.CANNED_RESPONSES},{icon:"flash-on",label:"INTEGRATIONS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/integrations`),toStateName:"settings_applications",featureFlag:_.INTEGRATIONS},{icon:"key",label:"AUDIT_LOGS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/audit-logs/list`),toStateName:"auditlogs_list",isEnterpriseOnly:!0,featureFlag:_.AUDIT_LOGS},{icon:"scan-person",label:"CUSTOM_ROLES",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/custom-roles/list`),toStateName:"custom_roles_list",isEnterpriseOnly:!0,beta:!0},{icon:"document-list-clock",label:"SLA",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/sla/list`),toStateName:"sla_list",isEnterpriseOnly:!0,featureFlag:_.SLA,beta:!0},{icon:"credit-card-person",label:"BILLING",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/billing`),toStateName:"billing_settings_index",showOnlyOnCloud:!0}]}),bt=()=>({parentNav:"notifications",routes:["notifications_index"],menuItems:[]}),St=t=>[{icon:"mail-inbox",key:"inboxView",label:"INBOX_VIEW",featureFlag:_.INBOX_VIEW,toState:s(`accounts/${t}/inbox-view`),toStateName:"inbox_view"},{icon:"chat",key:"conversations",label:"CONVERSATIONS",toState:s(`accounts/${t}/dashboard`),toStateName:"home"},{icon:"captain",key:"captain",label:"CAPTAIN",featureFlag:_.CAPTAIN,toState:s(`accounts/${t}/captain/documents`),toStateName:"captain"},{icon:"book-contacts",key:"contacts",label:"CONTACTS",featureFlag:_.CRM,toState:s(`accounts/${t}/contacts`),toStateName:"contacts_dashboard_index"},{icon:"arrow-trending-lines",key:"reports",label:"REPORTS",featureFlag:_.REPORTS,toState:s(`accounts/${t}/reports`),toStateName:"account_overview_reports"},{icon:"megaphone",key:"campaigns",label:"CAMPAIGNS",featureFlag:_.CAMPAIGNS,toState:s(`accounts/${t}/campaigns`),toStateName:"campaigns_ongoing_index"},{icon:"library",key:"helpcenter",label:"HELP_CENTER.TITLE",featureFlag:_.HELP_CENTER,alwaysVisibleOnChatwootInstances:!0,toState:s(`accounts/${t}/portals/portal_articles_index`),toStateName:"portals_index"},{icon:"settings",key:"settings",label:"SETTINGS",toState:s(`accounts/${t}/settings`),toStateName:"settings_home"}],wt=t=>({primaryMenu:St(t),secondaryMenu:[ht(t),_t(t),gt(t),pt(t),ft(t),bt()]}),At={props:{source:{type:String,default:""},name:{type:String,default:""},accountId:{type:Number,default:0}},computed:{dashboardPath(){return s(`accounts/${this.accountId}/dashboard`)}}},yt={class:"w-8 h-8"},Ct=["src","alt"];function vt(t,o,n,g,b,e){const m=r("router-link");return a(),d("div",yt,[i(m,{to:e.dashboardPath,replace:""},{default:u(()=>[h("img",{src:n.source,alt:n.name},null,8,Ct)]),_:1},8,["to"])])}const xt=v(At,[["render",vt]]),Nt={components:{DropdownMenu:Z,OnClickOutside:q},props:{to:{type:String,default:""},id:{type:String,default:""},name:{type:String,default:""},icon:{type:String,default:""},count:{type:String,default:""},isChildMenuActive:{type:Boolean,default:!1},openInNewPage:{type:Boolean,default:!1}},data(){return{helpCenterMenu:J,showHelpCenterMenu:!1}},computed:{helpCenterMenuItems(){return this.helpCenterMenu.map(t=>({...t,isSelected:this.isSelectedMenuItem(t)}))},isHelpCenter(){return this.id==="helpcenter"},isHelpCenterSelected(){return["portals_new","portals_index","portals_articles_index","portals_articles_new","portals_articles_edit","portals_categories_index","portals_categories_articles_index","portals_categories_articles_edit","portals_locales_index","portals_settings_index"].includes(this.$route.name)}},methods:{isSelectedMenuItem(t){return t.value.includes(this.$route.name)},toggleHelpCenterMenu(){this.showHelpCenterMenu=!this.showHelpCenterMenu},handleHelpCenterAction({action:t}){this.$router.push({name:"portals_index",params:{navigationPath:t}})}}},It=["href","rel","target","onClick"],kt={class:"sr-only"},Mt={key:0,class:"absolute bg-yellow-500 text-black-900 -top-1 -right-1"};function Tt(t,o,n,g,b,e){const m=r("fluent-icon"),l=r("DropdownMenu"),c=r("OnClickOutside"),x=r("router-link"),S=T("tooltip");return e.isHelpCenter?(a(),A(c,{key:0,onTrigger:o[1]||(o[1]=p=>b.showHelpCenterMenu=!1)},{default:u(()=>[k((a(),d("button",{class:C(["relative flex items-center justify-center w-10 h-10 my-2 rounded-lg text-slate-700 dark:text-slate-100 hover:!bg-slate-25 dark:hover:!bg-slate-700 dark:hover:text-slate-100 hover:text-slate-600",{"bg-woot-50 dark:bg-slate-800 text-woot-500 hover:bg-woot-50":e.isHelpCenterSelected}]),onClick:o[0]||(o[0]=(...p)=>e.toggleHelpCenterMenu&&e.toggleHelpCenterMenu(...p))},[i(m,{icon:n.icon,class:C({"text-woot-500":e.isHelpCenterSelected})},null,8,["icon","class"]),b.showHelpCenterMenu&&e.isHelpCenter?(a(),A(l,{key:0,"menu-items":e.helpCenterMenuItems,class:"ltr:left-10 rtl:right-10 w-36 z-[100] top-0 overflow-y-auto max-h-52",onAction:e.handleHelpCenterAction},null,8,["menu-items","onAction"])):w("",!0)],2)),[[S,t.$t(`SIDEBAR.${n.name}`),void 0,{top:!0}]])]),_:1})):(a(),A(x,{key:1,to:n.to,custom:""},{default:u(({href:p,isActive:N,navigate:y})=>[k((a(),d("a",{href:p,class:C(["relative flex items-center justify-center w-10 h-10 my-2 rounded-lg text-slate-700 dark:text-slate-100 hover:bg-slate-25 dark:hover:bg-slate-700 dark:hover:text-slate-100 hover:text-slate-600",{"bg-woot-50 dark:bg-slate-800 text-woot-500 hover:bg-woot-50":N||n.isChildMenuActive}]),rel:n.openInNewPage?"noopener noreferrer nofollow":void 0,target:n.openInNewPage?"_blank":void 0,onClick:y},[i(m,{icon:n.icon,class:C({"text-woot-500":N||n.isChildMenuActive})},null,8,["icon","class"]),h("span",kt,f(n.name),1),n.count?(a(),d("span",Mt,f(n.count),1)):w("",!0)],10,It)),[[S,t.$t(`SIDEBAR.${n.name}`),void 0,{right:!0}]])]),_:1},8,["to"]))}const Et=v(Nt,[["render",Tt]]),Ot={componentName:"WootDropdownMenu",props:{title:{type:String,default:""}}},$t={class:"inline-flex list-none",tabindex:null,"aria-disabled":!0},Lt={class:"text-xs text-slate-600 dark:text-slate-100 mt-1 font-medium w-full block text-left rtl:text-right whitespace-nowrap p-2"};function Rt(t,o,n,g,b,e){return a(),d("li",$t,[h("span",Lt,f(n.title),1),it(t.$slots,"default")])}const Bt=v(Ot,[["render",Rt]]),Pt={},Dt={class:"list-none my-1 mx-0 border-b border-slate-50 dark:border-slate-700",tabindex:null,"aria-disabled":!0};function Ut(t,o,n,g,b,e){return a(),d("li",Dt)}const Ft=v(Pt,[["render",Ut]]),Vt={props:{status:{type:String,default:""}}};function Wt(t,o,n,g,b,e){return a(),d("div",{class:C(`status-badge status-badge__${n.status} rounded-full w-2.5 h-2.5 mr-0.5 rtl:mr-0 rtl:ml-0.5 inline-flex`)},null,2)}const Gt=v(Vt,[["render",Wt],["__scopeId","data-v-442d1ee5"]]),{AVAILABILITY_STATUS_KEYS:R}=B,Ht={components:{WootDropdownHeader:Bt,WootDropdownDivider:Ft,WootDropdownMenu:F,WootDropdownItem:U,AvailabilityStatusBadge:Gt,NextButton:$},data(){return{isStatusMenuOpened:!1,isUpdating:!1}},computed:{...M({getCurrentUserAvailability:"getCurrentUserAvailability",currentAccountId:"getCurrentAccountId",currentUserAutoOffline:"getCurrentUserAutoOffline"}),statusList(){return[this.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.ONLINE"),this.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.BUSY"),this.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.OFFLINE")]},availabilityDisplayLabel(){const t=R.findIndex(o=>o===this.currentUserAvailability);return this.statusList[t]},currentUserAvailability(){return this.getCurrentUserAvailability},availabilityStatuses(){return this.statusList.map((t,o)=>({label:t,value:R[o],disabled:this.currentUserAvailability===R[o]}))}},methods:{openStatusMenu(){this.isStatusMenuOpened=!0},closeStatusMenu(){this.isStatusMenuOpened=!1},updateAutoOffline(t){this.$store.dispatch("updateAutoOffline",{accountId:this.currentAccountId,autoOffline:t})},changeAvailabilityStatus(t){if(!this.isUpdating){this.isUpdating=!0;try{this.$store.dispatch("updateAvailability",{availability:t,account_id:this.currentAccountId})}catch{ut(this.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.SET_AVAILABILITY_ERROR"))}finally{this.isUpdating=!1}}}}},jt={class:"min-w-0 truncate font-medium text-xs"},Kt={class:"flex items-center"},zt={class:"mx-2 my-0 text-xs font-medium text-slate-600 dark:text-slate-100"};function Yt(t,o,n,g,b,e){const m=r("WootDropdownHeader"),l=r("AvailabilityStatusBadge"),c=r("NextButton"),x=r("WootDropdownItem"),S=r("WootDropdownDivider"),p=r("fluent-icon"),N=r("woot-switch"),y=r("WootDropdownMenu"),L=T("tooltip");return a(),A(y,null,{default:u(()=>[i(m,{title:t.$t("SIDEBAR.SET_AVAILABILITY_TITLE")},null,8,["title"]),(a(!0),d(E,null,O(e.availabilityStatuses,I=>(a(),A(x,{key:I.value,class:"flex items-baseline"},{default:u(()=>[i(c,{sm:"",color:I.disabled?"blue":"slate",variant:I.disabled?"faded":"ghost",class:"status-change--dropdown-button !w-full !justify-start",onClick:nn=>e.changeAvailabilityStatus(I.value)},{default:u(()=>[i(l,{status:I.value},null,8,["status"]),h("span",jt,f(I.label),1)]),_:2},1032,["color","variant","onClick"])]),_:2},1024))),128)),i(S),i(x,{class:"flex items-center justify-between px-3 py-2 m-0"},{default:u(()=>[h("div",Kt,[k(i(p,{icon:"info",size:"14",class:"mt-px"},null,512),[[L,t.$t("SIDEBAR.SET_AUTO_OFFLINE.INFO_TEXT"),void 0,{"right-start":!0}]]),h("span",zt,f(t.$t("SIDEBAR.SET_AUTO_OFFLINE.TEXT")),1)]),i(N,{size:"small",class:"mx-1 mt-px mb-0","model-value":t.currentUserAutoOffline,onInput:e.updateAutoOffline},null,8,["model-value","onInput"])]),_:1}),i(S)]),_:1})}const Xt=v(Ht,[["render",Yt]]),qt={components:{WootDropdownMenu:F,WootDropdownItem:U,AvailabilityStatus:Xt,NextButton:$},props:{show:{type:Boolean,default:!1}},emits:["close","openKeyShortcutModal","toggleAccounts","showSupportChatWindow"],computed:{...M({currentUser:"getCurrentUser",globalConfig:"globalConfig/get",accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),showChangeAccountOption(){if(this.globalConfig.createNewAccountFromDashboard)return!0;const{accounts:t=[]}=this.currentUser;return t.length>1},showChatSupport(){return this.isFeatureEnabledonAccount(this.accountId,_.CONTACT_CHATWOOT_SUPPORT_TEAM)&&this.globalConfig.chatwootInboxToken}},methods:{handleProfileSettingClick(t,o){this.$emit("close"),o(t)},handleKeyboardHelpClick(){this.$emit("openKeyShortcutModal"),this.$emit("close")},logout(){H.logout()},onClickAway(){this.show&&this.$emit("close")},openAppearanceOptions(){document.querySelector("ninja-keys").open({parent:"appearance_settings"})}}},Zt={class:"min-w-0 truncate font-medium text-xs"},Jt={class:"min-w-0 truncate font-medium text-xs"},Qt={class:"min-w-0 truncate font-medium text-xs"},te=["href","onClick"],ee={class:"min-w-0 truncate font-medium text-xs"},ne={class:"min-w-0 truncate font-medium text-xs"},oe={class:"min-w-0 truncate font-medium text-xs"},se={class:"min-w-0 truncate font-medium text-xs"};function ae(t,o,n,g,b,e){const m=r("AvailabilityStatus"),l=r("NextButton"),c=r("WootDropdownItem"),x=r("router-link"),S=r("WootDropdownMenu"),p=T("on-clickaway");return a(),A(W,{name:"menu-slide"},{default:u(()=>[n.show?k((a(),d("div",{key:0,class:C(["absolute z-30 w-64 px-2 py-2 bg-white border rounded-md shadow-xl left-3 rtl:left-auto rtl:right-3 bottom-16 dark:bg-slate-800 border-slate-25 dark:border-slate-700",{"block visible":n.show}])},[i(m),i(S,null,{default:u(()=>[e.showChangeAccountOption?(a(),A(c,{key:0},{default:u(()=>[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-arrow-right-left",class:"!w-full !justify-start",onClick:o[0]||(o[0]=N=>t.$emit("toggleAccounts"))},{default:u(()=>[h("span",Zt,f(t.$t("SIDEBAR_ITEMS.CHANGE_ACCOUNTS")),1)]),_:1})]),_:1})):w("",!0),e.showChatSupport?(a(),A(c,{key:1},{default:u(()=>[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-message-circle-question",class:"!w-full !justify-start",onClick:o[1]||(o[1]=N=>t.$emit("showSupportChatWindow"))},{default:u(()=>[h("span",Jt,f(t.$t("SIDEBAR_ITEMS.CONTACT_SUPPORT")),1)]),_:1})]),_:1})):w("",!0),i(c,null,{default:u(()=>[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-keyboard",class:"!w-full !justify-start",onClick:e.handleKeyboardHelpClick},{default:u(()=>[h("span",Qt,f(t.$t("SIDEBAR_ITEMS.KEYBOARD_SHORTCUTS")),1)]),_:1},8,["onClick"])]),_:1}),i(c,null,{default:u(()=>[i(x,{to:`/app/accounts/${t.accountId}/profile/settings`,custom:""},{default:u(({href:N,isActive:y,navigate:L})=>[h("a",{href:N,class:C({"is-active":y}),onClick:I=>e.handleProfileSettingClick(I,L)},[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-circle-user",class:"!w-full !justify-start"},{default:u(()=>[h("span",ee,f(t.$t("SIDEBAR_ITEMS.PROFILE_SETTINGS")),1)]),_:1})],10,te)]),_:1},8,["to"])]),_:1}),i(c,null,{default:u(()=>[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-sun-moon",class:"!w-full !justify-start",onClick:e.openAppearanceOptions},{default:u(()=>[h("span",ne,f(t.$t("SIDEBAR_ITEMS.APPEARANCE")),1)]),_:1},8,["onClick"])]),_:1}),t.currentUser.type==="SuperAdmin"?(a(),A(c,{key:2},{default:u(()=>[h("a",{href:"/super_admin",target:"_blank",rel:"noopener nofollow noreferrer",onClick:o[2]||(o[2]=N=>t.$emit("close"))},[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-layout-dashboard",class:"!w-full !justify-start"},{default:u(()=>[h("span",oe,f(t.$t("SIDEBAR_ITEMS.SUPER_ADMIN_CONSOLE")),1)]),_:1})])]),_:1})):w("",!0),i(c,null,{default:u(()=>[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-circle-power",class:"!w-full !justify-start",onClick:e.logout},{default:u(()=>[h("span",se,f(t.$t("SIDEBAR_ITEMS.LOGOUT")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})],2)),[[p,e.onClickAway]]):w("",!0)]),_:1})}const ie=v(qt,[["render",ae]]),re={components:{Thumbnail:mt,NextButton:$},emits:["toggleMenu"],computed:{...M({currentUser:"getCurrentUser",currentUserAvailability:"getCurrentUserAvailability"}),statusOfAgent(){return this.currentUserAvailability||"offline"}},methods:{handleClick(){this.$emit("toggleMenu")}}};function le(t,o,n,g,b,e){const m=r("Thumbnail"),l=r("NextButton"),c=T("tooltip");return k((a(),A(l,{link:"",class:"rounded-full",onClick:e.handleClick},{default:u(()=>[i(m,{src:t.currentUser.avatar_url,username:t.currentUser.name,status:e.statusOfAgent,"should-show-status-always":"",size:"32px",class:"flex-shrink-0"},null,8,["src","username","status"])]),_:1},8,["onClick"])),[[c,t.$t("SIDEBAR.PROFILE_SETTINGS"),void 0,{right:!0}]])}const ce=v(re,[["render",le]]),ue={emits:["openNotificationPanel"],computed:{...M({notificationMetadata:"notifications/getMeta"}),unreadCount(){return this.notificationMetadata.unreadCount?this.notificationMetadata.unreadCount<100?`${this.notificationMetadata.unreadCount}`:"99+":""},isNotificationPanelActive(){return this.$route.name==="notifications_index"}},methods:{openNotificationPanel(){this.$route.name!=="notifications_index"&&this.$emit("openNotificationPanel")}}},de={class:"mb-4"},me={key:0,class:"text-black-900 bg-yellow-300 absolute -top-0.5 -right-1 text-xxs min-w-[1rem] rounded-full"};function he(t,o,n,g,b,e){const m=r("fluent-icon");return a(),d("div",de,[h("button",{class:C(["relative flex items-center justify-center w-10 h-10 p-0 my-2 rounded-lg text-slate-600 dark:text-slate-100 hover:bg-slate-25 dark:hover:bg-slate-700 dark:hover:text-slate-100 hover:text-slate-600",{"bg-woot-50 dark:bg-slate-800 text-woot-500 hover:bg-woot-50":e.isNotificationPanelActive}]),onClick:o[0]||(o[0]=(...l)=>e.openNotificationPanel&&e.openNotificationPanel(...l))},[i(m,{icon:"alert",class:C({"text-woot-500":e.isNotificationPanelActive})},null,8,["class"]),e.unreadCount?(a(),d("span",me,f(e.unreadCount),1)):w("",!0)],2)])}const _e=v(ue,[["render",he]]),ge={components:{Logo:xt,PrimaryNavItem:Et,OptionsMenu:ie,AgentDetails:ce,NotificationBell:_e},props:{isACustomBrandedInstance:{type:Boolean,default:!1},logoSource:{type:String,default:""},installationName:{type:String,default:""},accountId:{type:Number,default:0},menuItems:{type:Array,default:()=>[]},activeMenuItem:{type:String,default:""}},emits:["toggleAccounts","openNotificationPanel","openKeyShortcutModal"],data(){return{helpDocsURL:B.DOCS_URL,showOptionsMenu:!1}},methods:{frontendURL:s,toggleOptions(){this.showOptionsMenu=!this.showOptionsMenu},toggleAccountModal(){this.$emit("toggleAccounts")},toggleSupportChatWindow(){window.$chatwoot.toggle()},openNotificationPanel(){dt(j.OPENED_NOTIFICATIONS),this.$emit("openNotificationPanel")}}},pe={class:"flex flex-col justify-between w-16 h-full bg-white border-r dark:bg-slate-900 border-slate-50 dark:border-slate-800/50 rtl:border-l rtl:border-r-0"},fe={class:"flex flex-col items-center"},be={class:"flex flex-col items-center justify-end pb-6"},Se=["href"],we={class:"sr-only"};function Ae(t,o,n,g,b,e){const m=r("Logo"),l=r("PrimaryNavItem"),c=r("fluent-icon"),x=r("NotificationBell"),S=r("AgentDetails"),p=r("OptionsMenu"),N=T("tooltip");return a(),d("div",pe,[h("div",fe,[i(m,{source:n.logoSource,name:n.installationName,"account-id":n.accountId,class:"m-4 mb-10"},null,8,["source","name","account-id"]),(a(!0),d(E,null,O(n.menuItems,y=>(a(),A(l,{id:y.key,key:y.toState,icon:y.icon,name:y.label,to:y.toState,"is-child-menu-active":y.key===n.activeMenuItem},null,8,["id","icon","name","to","is-child-menu-active"]))),128))]),h("div",be,[n.isACustomBrandedInstance?w("",!0):k((a(),d("a",{key:0,href:b.helpDocsURL,class:"relative flex items-center justify-center w-10 h-10 my-2 rounded-lg text-slate-700 dark:text-slate-100 hover:bg-slate-25 dark:hover:bg-slate-700 dark:hover:text-slate-100 hover:text-slate-600",rel:"noopener noreferrer nofollow",target:"_blank"},[i(c,{icon:"book-open-globe"}),h("span",we,f(t.$t("SIDEBAR.DOCS")),1)],8,Se)),[[N,t.$t("SIDEBAR.DOCS"),void 0,{right:!0}]]),i(x,{onOpenNotificationPanel:e.openNotificationPanel},null,8,["onOpenNotificationPanel"]),i(S,{onToggleMenu:e.toggleOptions},null,8,["onToggleMenu"]),i(p,{show:b.showOptionsMenu,onToggleAccounts:e.toggleAccountModal,onShowSupportChatWindow:e.toggleSupportChatWindow,onOpenKeyShortcutModal:o[0]||(o[0]=y=>t.$emit("openKeyShortcutModal")),onClose:e.toggleOptions},null,8,["show","onToggleAccounts","onShowSupportChatWindow","onClose"])])])}const ye=v(ge,[["render",Ae]]),Ce={props:{to:{type:String,default:""},label:{type:String,default:""},labelColor:{type:String,default:""},shouldTruncate:{type:Boolean,default:!1},icon:{type:String,default:""},warningIcon:{type:String,default:""},showChildCount:{type:Boolean,default:!1},childItemCount:{type:Number,default:0}},computed:{showIcon(){return{"overflow-hidden whitespace-nowrap text-ellipsis":this.shouldTruncate}},isCountZero(){return this.childItemCount===0},menuTitle(){return this.shouldTruncate?this.label:""}}},ve=["onClick"],xe=["href"],Ne={key:0,class:"inline-flex items-center justify-center w-4 rounded-sm bg-slate-100 dark:bg-slate-700 p-0.5 mr-1.5 rtl:mr-0 rtl:ml-1.5"},Ie={class:"items-center flex overflow-hidden whitespace-nowrap text-ellipsis w-full justify-between"},ke=["title"],Me={key:2,class:"inline-flex mr-1 bg-red-50 dark:bg-red-900 p-0.5 rounded-sm"};function Te(t,o,n,g,b,e){const m=r("fluent-icon"),l=r("router-link"),c=T("tooltip");return a(),A(l,{to:n.to,custom:"","active-class":"active"},{default:u(({href:x,isActive:S,navigate:p})=>[h("li",{class:C(["h-7 my-1 hover:bg-slate-25 hover:text-bg-50 flex items-center px-2 rounded-md dark:hover:bg-slate-800",{"bg-woot-25 dark:bg-slate-800":S,"text-ellipsis overflow-hidden whitespace-nowrap max-w-full":n.shouldTruncate}]),onClick:p},[h("a",{href:x,class:"inline-flex text-left max-w-full w-full items-center"},[n.icon?(a(),d("span",Ne,[i(m,{class:C(["text-xxs text-slate-700 dark:text-slate-200",{"text-woot-500 dark:text-woot-500":S}]),icon:n.icon,size:"12"},null,8,["class","icon"])])):w("",!0),n.labelColor?(a(),d("span",{key:1,class:"inline-flex rounded-sm bg-slate-100 h-3 w-3.5 mr-1.5 rtl:mr-0 rtl:ml-1.5 border border-slate-50 dark:border-slate-900",style:rt({backgroundColor:n.labelColor})},null,4)):w("",!0),h("div",Ie,[h("span",{title:e.menuTitle,class:C(["text-sm text-slate-700 dark:text-slate-100",{"text-woot-500 dark:text-woot-500":S,"text-ellipsis overflow-hidden whitespace-nowrap max-w-full":n.shouldTruncate}])},f(n.label),11,ke),n.showChildCount?(a(),d("span",{key:0,class:C(["bg-slate-50 dark:bg-slate-700 rounded-full min-w-[18px] justify-center items-center flex text-xxs mx-1 py-0 px-1",e.isCountZero?"text-slate-300 dark:text-slate-500":"text-slate-700 dark:text-slate-50"])},f(n.childItemCount),3)):w("",!0)]),n.warningIcon?(a(),d("span",Me,[k(i(m,{class:"text-xxs text-red-500 dark:text-red-300",icon:n.warningIcon,size:"12"},null,8,["icon"]),[[c,t.$t("SIDEBAR.REAUTHORIZE"),void 0,{"top-end":!0}]])])):w("",!0)],8,xe)],10,ve)]),_:1},8,["to"])}const Ee=v(Ce,[["render",Te]]),Oe={components:{SecondaryChildNavItem:Ee,Policy:Q,NextButton:$},props:{menuItem:{type:Object,default:()=>({})}},emits:["addLabel","open"],setup(){const{isAdmin:t}=tt(),{isEnterprise:o}=et();return{isAdmin:t,isEnterprise:o}},computed:{...M({activeInbox:"getSelectedInbox",accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",globalConfig:"globalConfig/get"}),isCountZero(){return this.menuItem.count===0},isActiveView(){return this.computedClass.includes("active-view")},hasSubMenu(){return!!this.menuItem.children},isMenuItemVisible(){let t=!0;return this.menuItem.featureFlag&&(t=this.isFeatureEnabledonAccount(this.accountId,this.menuItem.featureFlag)),this.menuItem.isEnterpriseOnly?this.isEnterprise?t||this.globalConfig.displayManifest:!1:this.menuItem.featureFlag?this.isFeatureEnabledonAccount(this.accountId,this.menuItem.featureFlag):t},isAllConversations(){return this.$store.state.route.name==="inbox_conversation"&&this.menuItem.toStateName==="home"},isMentions(){return X({route:this.$route})&&this.menuItem.toStateName==="conversation_mentions"},isUnattended(){return Y({route:this.$route})&&this.menuItem.toStateName==="conversation_unattended"},isTeamsSettings(){return this.$store.state.route.name==="settings_teams_edit"&&this.menuItem.toStateName==="settings_teams_list"},isInboxSettings(){return this.$route.name==="settings_inbox_show"&&this.menuItem.toStateName==="settings_inbox_list"},isIntegrationsSettings(){return this.$store.state.route.name==="settings_integrations_webhook"&&this.menuItem.toStateName==="settings_integrations"},isApplicationsSettings(){return this.$store.state.route.name==="settings_applications_integration"&&this.menuItem.toStateName==="settings_applications"},isContactsDefaultRoute(){return this.menuItem.toStateName==="contacts_dashboard_index"&&(this.$store.state.route.name==="contacts_dashboard_index"||this.$store.state.route.name==="contacts_edit")},isCurrentRoute(){return this.$store.state.route.name.includes(this.menuItem.toStateName)},computedClass(){return this.activeInbox?" ":this.isAllConversations||this.isMentions||this.isUnattended||this.isContactsDefaultRoute||this.isCurrentRoute||this.hasSubMenu&&(this.isTeamsSettings||this.isInboxSettings||this.isIntegrationsSettings||this.isApplicationsSettings)?"bg-woot-25 dark:bg-slate-800 text-woot-500 dark:text-woot-500 hover:text-woot-500 dark:hover:text-woot-500 active-view":"hover:text-slate-700 dark:hover:text-slate-100"}},methods:{computedInboxClass(t){const{type:o,phoneNumber:n}=t;return o?z(o,n):""},computedInboxErrorClass(t){const{type:o,reauthorizationRequired:n}=t;return o?K(o,n):""},newLinkClick(t,o){this.menuItem.newLinkRouteName?o(t):this.menuItem.showModalForNewItem&&this.menuItem.modalName==="AddLabel"&&(t.preventDefault(),this.$emit("addLabel"))},showItem(t){return this.isAdmin&&!!t.newLink},onClickOpen(){this.$emit("open")},showChildCount(t){return Number.isInteger(t)}}},$e={class:"mt-1"},Le={key:0,class:"flex justify-between"},Re={class:"px-2 pt-1 my-2 text-sm font-semibold text-slate-700 dark:text-slate-200"},Be={key:0,class:"flex items-center"},Pe={key:1,"data-view-component":"true",label:"Beta",class:"inline-block px-1 mx-1 leading-4 text-green-500 border border-green-400 rounded-lg text-xxs"},De={key:2,class:"list-none reset-base"},Ue={class:"pl-1"},Fe=["href"];function Ve(t,o,n,g,b,e){const m=r("NextButton"),l=r("fluent-icon"),c=r("router-link"),x=r("SecondaryChildNavItem"),S=r("Policy");return k((a(),d("li",$e,[e.hasSubMenu?(a(),d("div",Le,[h("span",Re,f(t.$t(`SIDEBAR.${n.menuItem.label}`)),1),n.menuItem.showNewButton?(a(),d("div",Be,[i(m,{ghost:"",xs:"",slate:"",icon:"i-lucide-plus",onClick:e.onClickOpen},null,8,["onClick"])])):w("",!0)])):(a(),A(c,{key:1,class:C(["flex items-center p-2 m-0 text-sm leading-4 rounded-lg text-slate-700 dark:text-slate-100 hover:bg-slate-25 dark:hover:bg-slate-800",e.computedClass]),to:n.menuItem&&n.menuItem.toState},{default:u(()=>[i(l,{icon:n.menuItem.icon,class:"min-w-[1rem] mr-1.5 rtl:mr-0 rtl:ml-1.5",size:"14"},null,8,["icon"]),G(" "+f(t.$t(`SIDEBAR.${n.menuItem.label}`))+" ",1),e.showChildCount(n.menuItem.count)?(a(),d("span",{key:0,class:C(["px-1 py-0 mx-1 rounded-md text-xxs",{"text-slate-300 dark:text-slate-600":e.isCountZero&&!e.isActiveView,"text-slate-600 dark:text-slate-50":!e.isCountZero&&!e.isActiveView,"bg-woot-75 dark:bg-woot-200 text-woot-600 dark:text-woot-600":e.isActiveView,"bg-slate-50 dark:bg-slate-700":!e.isActiveView}])},f(`${n.menuItem.count}`),3)):w("",!0),n.menuItem.beta?(a(),d("span",Pe,f(t.$t("SIDEBAR.BETA")),1)):w("",!0)]),_:1},8,["class","to"])),e.hasSubMenu?(a(),d("ul",De,[(a(!0),d(E,null,O(n.menuItem.children,p=>(a(),A(x,{key:p.id,to:p.toState,label:p.label,"label-color":p.color,"should-truncate":p.truncateLabel,icon:e.computedInboxClass(p),"warning-icon":e.computedInboxErrorClass(p),"show-child-count":e.showChildCount(p.count),"child-item-count":p.count},null,8,["to","label","label-color","should-truncate","icon","warning-icon","show-child-count","child-item-count"]))),128)),i(S,{permissions:["administrator"]},{default:u(()=>[n.menuItem.newLink?(a(),A(c,{key:0,to:n.menuItem.toState,custom:""},{default:u(({href:p,navigate:N})=>[h("li",Ue,[h("a",{href:p},[i(m,{ghost:"",xs:"",slate:"",icon:"i-lucide-plus",label:t.$t(`SIDEBAR.${n.menuItem.newLinkTag}`),"data-testid":n.menuItem.dataTestid,onClick:y=>e.newLinkClick(y,N)},null,8,["label","data-testid","onClick"])],8,Fe)])]),_:1},8,["to"])):w("",!0)]),_:1})])):w("",!0)],512)),[[lt,e.isMenuItemVisible]])}const We=v(Oe,[["render",Ve]]),Ge={components:{NextButton:$},emits:["toggleAccounts"],data(){return{showSwitchButton:!1}},computed:{...M({account:"getCurrentAccount",userAccounts:"getUserAccounts"}),showShowCurrentAccountContext(){return this.userAccounts.length>1&&this.account.name}},methods:{setShowSwitch(){this.showSwitchButton=!0},resetShowSwitch(){this.showSwitchButton=!1}}},He={class:"mb-0 overflow-hidden font-medium text-ellipsis whitespace-nowrap text-slate-800 dark:text-slate-100"},je={key:0,class:"absolute top-0 right-0 flex items-center justify-end w-full h-full rounded-md ltr:overlay-shadow ltr:dark:overlay-shadow-dark rtl:rtl-overlay-shadow rtl:dark:rtl-overlay-shadow-dark"},Ke={class:"mx-2 my-0"};function ze(t,o,n,g,b,e){const m=r("NextButton");return e.showShowCurrentAccountContext?(a(),d("div",{key:0,class:"relative px-2 py-2 mt-2 text-xs border rounded-md cursor-pointer text-slate-700 dark:text-slate-200 border-slate-50 dark:border-slate-800/50 hover:bg-slate-50 dark:hover:bg-slate-800",onMouseover:o[1]||(o[1]=(...l)=>e.setShowSwitch&&e.setShowSwitch(...l)),onMouseleave:o[2]||(o[2]=(...l)=>e.resetShowSwitch&&e.resetShowSwitch(...l))},[G(f(t.$t("SIDEBAR.CURRENTLY_VIEWING_ACCOUNT"))+" ",1),h("p",He,f(t.account.name),1),i(W,{name:"fade"},{default:u(()=>[b.showSwitchButton?(a(),d("div",je,[h("div",Ke,[i(m,{ghost:"",xs:"",icon:"i-lucide-arrow-right-left",label:t.$t("SIDEBAR.SWITCH"),onClick:o[0]||(o[0]=l=>t.$emit("toggleAccounts"))},null,8,["label"])])])):w("",!0)]),_:1})],32)):w("",!0)}const Ye=v(Ge,[["render",ze],["__scopeId","data-v-fbc67c56"]]),Xe={components:{AccountContext:Ye,SecondaryNavItem:We},props:{accountId:{type:Number,default:0},labels:{type:Array,default:()=>[]},inboxes:{type:Array,default:()=>[]},teams:{type:Array,default:()=>[]},customViews:{type:Array,default:()=>[]},menuConfig:{type:Object,default:()=>{}},currentUser:{type:Object,default:()=>{}},isOnChatwootCloud:{type:Boolean,default:!1}},emits:["addLabel","toggleAccounts"],computed:{...M({isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),contactCustomViews(){return this.customViews.filter(t=>t.filter_type==="contact")},accessibleMenuItems(){return this.menuConfig.menuItems.filter(o=>{const n=P(this.currentUser,this.accountId);return D(V[o.toStateName],n)}).filter(o=>o.showOnlyOnCloud?this.isOnChatwootCloud:!0)},inboxSection(){return{icon:"folder",label:"INBOXES",hasSubMenu:!0,newLink:this.showNewLink(_.INBOX_MANAGEMENT),newLinkTag:"NEW_INBOX",key:"inbox",toState:s(`accounts/${this.accountId}/settings/inboxes/new`),toStateName:"settings_inbox_new",newLinkRouteName:"settings_inbox_new",children:this.inboxes.map(t=>({id:t.id,label:t.name,truncateLabel:!0,toState:s(`accounts/${this.accountId}/inbox/${t.id}`),type:t.channel_type,phoneNumber:t.phone_number,reauthorizationRequired:t.reauthorization_required})).sort((t,o)=>t.label.toLowerCase()>o.label.toLowerCase()?1:-1)}},labelSection(){return{icon:"number-symbol",label:"LABELS",hasSubMenu:!0,newLink:this.showNewLink(_.TEAM_MANAGEMENT),newLinkTag:"NEW_LABEL",key:"label",toState:s(`accounts/${this.accountId}/settings/labels`),toStateName:"labels_list",showModalForNewItem:!0,modalName:"AddLabel",dataTestid:"sidebar-new-label-button",children:this.labels.map(t=>({id:t.id,label:t.title,color:t.color,truncateLabel:!0,toState:s(`accounts/${this.accountId}/label/${t.title}`)}))}},contactLabelSection(){return{icon:"number-symbol",label:"TAGGED_WITH",hasSubMenu:!0,key:"labels",newLink:this.showNewLink(_.TEAM_MANAGEMENT),newLinkTag:"NEW_LABEL",toState:s(`accounts/${this.accountId}/settings/labels`),toStateName:"labels_list",showModalForNewItem:!0,modalName:"AddLabel",children:this.labels.map(t=>({id:t.id,label:t.title,color:t.color,truncateLabel:!0,toState:s(`accounts/${this.accountId}/contacts/labels/${t.title}`)}))}},teamSection(){return{icon:"people-team",label:"TEAMS",hasSubMenu:!0,newLink:this.showNewLink(_.TEAM_MANAGEMENT),newLinkTag:"NEW_TEAM",key:"team",toState:s(`accounts/${this.accountId}/settings/teams/new`),toStateName:"settings_teams_new",newLinkRouteName:"settings_teams_new",children:this.teams.map(t=>({id:t.id,label:t.name,truncateLabel:!0,toState:s(`accounts/${this.accountId}/team/${t.id}`)}))}},foldersSection(){return{icon:"folder",label:"CUSTOM_VIEWS_FOLDER",hasSubMenu:!0,key:"custom_view",children:this.customViews.filter(t=>t.filter_type==="conversation").map(t=>({id:t.id,label:t.name,truncateLabel:!0,toState:s(`accounts/${this.accountId}/custom_view/${t.id}`)}))}},contactSegmentsSection(){return{icon:"folder",label:"CUSTOM_VIEWS_SEGMENTS",hasSubMenu:!0,key:"segments",children:this.customViews.filter(t=>t.filter_type==="contact").map(t=>({id:t.id,label:t.name,truncateLabel:!0,toState:s(`accounts/${this.accountId}/contacts/segments/${t.id}`)}))}},additionalSecondaryMenuItems(){let t=[this.inboxSection,this.labelSection],o=[this.contactLabelSection];return this.teams.length&&(t=[this.teamSection,...t]),this.customViews.length&&(t=[this.foldersSection,...t]),this.contactCustomViews.length&&(o=[this.contactSegmentsSection,...o]),{conversations:t,contacts:o}}},methods:{showAddLabelPopup(){this.$emit("addLabel")},toggleAccountModal(){this.$emit("toggleAccounts")},showNewLink(t){return this.isFeatureEnabledonAccount(this.accountId,t)}}},qe={class:"flex flex-col w-48 h-full px-2 pb-8 overflow-auto text-sm bg-white border-r dark:bg-slate-900 dark:border-slate-800/50 rtl:border-r-0 rtl:border-l border-slate-50"};function Ze(t,o,n,g,b,e){const m=r("AccountContext"),l=r("SecondaryNavItem");return a(),d("div",qe,[i(m,{onToggleAccounts:e.toggleAccountModal},null,8,["onToggleAccounts"]),i(ct,{name:"menu-list",tag:"ul",class:"pt-2 list-none reset-base"},{default:u(()=>[(a(!0),d(E,null,O(e.accessibleMenuItems,c=>(a(),A(l,{key:c.toState,"menu-item":c},null,8,["menu-item"]))),128)),(a(!0),d(E,null,O(e.additionalSecondaryMenuItems[n.menuConfig.parentNav],c=>(a(),A(l,{key:c.key,"menu-item":c,onAddLabel:e.showAddLabelPopup},null,8,["menu-item","onAddLabel"]))),128))]),_:1})])}const Je=v(Xe,[["render",Ze]]),Qe={components:{PrimarySidebar:ye,SecondarySidebar:Je},props:{showSecondarySidebar:{type:Boolean,default:!0}},emits:["toggleAccountModal","showAddLabelPopup","openNotificationPanel","closeKeyShortcutModal","openKeyShortcutModal"],setup(t,{emit:o}){const n=st(),g=at(),{accountId:b}=nt(),e=()=>{o("openKeyShortcutModal")},m=()=>{o("closeKeyShortcutModal")},l=S=>n.name===S,c=S=>{l(S)||g.push({name:S})};return ot({"$mod+Slash":{action:e},"$mod+Escape":{action:m},"Alt+KeyC":{action:()=>c("home")},"Alt+KeyV":{action:()=>c("contacts_dashboard")},"Alt+KeyR":{action:()=>c("account_overview_reports")},"Alt+KeyS":{action:()=>c("agent_list")}}),{toggleKeyShortcutModal:e,accountId:b}},data(){return{showOptionsMenu:!1}},computed:{...M({currentUser:"getCurrentUser",globalConfig:"globalConfig/get",inboxes:"inboxes/getInboxes",isACustomBrandedInstance:"globalConfig/isACustomBrandedInstance",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",isOnChatwootCloud:"globalConfig/isOnChatwootCloud",labels:"labels/getLabelsOnSidebar",teams:"teams/getMyTeams"}),activeCustomView(){return this.activePrimaryMenu.key==="contacts"?"contact":this.activePrimaryMenu.key==="conversations"?"conversation":""},customViews(){return this.activeCustomView?this.$store.getters["customViews/getCustomViewsByFilterType"](this.activeCustomView):[]},isConversationOrContactActive(){return this.activePrimaryMenu.key==="contacts"||this.activePrimaryMenu.key==="conversations"},sideMenuConfig(){return wt(this.accountId)},primaryMenuItems(){const t=P(this.currentUser,this.accountId);return this.sideMenuConfig.primaryMenu.filter(n=>D(V[n.toStateName],t)?n.alwaysVisibleOnChatwootInstances&&!this.isACustomBrandedInstance?!0:n.featureFlag?this.isFeatureEnabledonAccount(this.accountId,n.featureFlag):!0:!1)},activeSecondaryMenu(){const{secondaryMenu:t}=this.sideMenuConfig,{name:o}=this.$route;return t.find(g=>g.routes.includes(o))||{}},activePrimaryMenu(){return this.primaryMenuItems.find(o=>o.key===this.activeSecondaryMenu.parentNav)||{}},hasSecondaryMenu(){return this.activeSecondaryMenu.menuItems&&this.activeSecondaryMenu.menuItems.length},hasSecondarySidebar(){return this.showSecondarySidebar&&this.hasSecondaryMenu}},watch:{activeCustomView(){this.fetchCustomViews()}},mounted(){this.$store.dispatch("labels/get"),this.$store.dispatch("inboxes/get"),this.$store.dispatch("notifications/unReadCount"),this.$store.dispatch("teams/get"),this.$store.dispatch("attributes/get"),this.fetchCustomViews()},methods:{fetchCustomViews(){this.isConversationOrContactActive&&this.$store.dispatch("customViews/get",this.activeCustomView)},toggleSupportChatWindow(){window.$chatwoot.toggle()},toggleAccountModal(){this.$emit("toggleAccountModal")},showAddLabelPopup(){this.$emit("showAddLabelPopup")},openNotificationPanel(){this.$emit("openNotificationPanel")}}},tn={class:"flex h-full"};function en(t,o,n,g,b,e){const m=r("PrimarySidebar"),l=r("SecondarySidebar");return a(),d("aside",tn,[i(m,{"logo-source":t.globalConfig.logoThumbnail,"installation-name":t.globalConfig.installationName,"is-a-custom-branded-instance":t.isACustomBrandedInstance,"account-id":g.accountId,"menu-items":e.primaryMenuItems,"active-menu-item":e.activePrimaryMenu.key,onToggleAccounts:e.toggleAccountModal,onOpenKeyShortcutModal:g.toggleKeyShortcutModal,onOpenNotificationPanel:e.openNotificationPanel},null,8,["logo-source","installation-name","is-a-custom-branded-instance","account-id","menu-items","active-menu-item","onToggleAccounts","onOpenKeyShortcutModal","onOpenNotificationPanel"]),e.hasSecondarySidebar?(a(),A(l,{key:0,"account-id":g.accountId,inboxes:t.inboxes,labels:t.labels,teams:t.teams,"custom-views":e.customViews,"menu-config":e.activeSecondaryMenu,"current-user":t.currentUser,"is-on-chatwoot-cloud":t.isOnChatwootCloud,onAddLabel:e.showAddLabelPopup,onToggleAccounts:e.toggleAccountModal},null,8,["account-id","inboxes","labels","teams","custom-views","menu-config","current-user","is-on-chatwoot-cloud","onAddLabel","onToggleAccounts"])):w("",!0)])}const kn=v(Qe,[["render",en]]);export{kn as default};
//# sourceMappingURL=Sidebar-Bqk23Ff8.js.map
